# Create volume
docker volume create n8n_data

# Run the image
docker run -it --rm \
 --name n8n \
 -p 5678:5678 \
 -e GENERIC_TIMEZONE="Europe/Berlin" \
 -e TZ="Europe/Berlin" \
 -e N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=true \
 -e N8N_RUNNERS_ENABLED=true \
 -e DB_SQLITE_POOL_SIZE=5 \
 -e NODE_FUNCTION_ALLOW_BUILTIN="*" \
 -v n8n_data:/home/node/.n8n \
 -v "/Users/bachelor/Git Projects/n8n/volume":/home/media \
 docker.n8n.io/n8nio/n8n

# Inspect volume
docker volume inspect n8n_data

# Create backup of the volume
docker run --rm -v n8n_data:/volume -v ~/Downloads:/backup alpine \
    tar czf /backup/n8n_data.tar.gz -C /volume .

# Create new volume and mount the backup
docker volume create n8n_data

# Transfer the backup data
docker run --rm \
  -v n8n_data:/volume \
  -v ~/Downloads/n8n_data.tar.gz:/backup/n8n_data.tar.gz:ro \
  alpine \
  sh -c "tar xzf /backup/n8n_data.tar.gz -C /volume"

# Run the Node.js server
npm run dev